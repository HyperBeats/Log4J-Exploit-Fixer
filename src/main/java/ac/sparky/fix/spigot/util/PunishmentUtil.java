package ac.sparky.fix.spigot.util;

import ac.sparky.fix.spigot.Plugin;
import org.bukkit.Bukkit;
import org.bukkit.entity.Player;
import org.bukkit.scheduler.BukkitRunnable;

public class PunishmentUtil {

    public static void punish(Player player) {

        if (!Plugin.getInstance().getConfigValues().isPunish()) return;

        Plugin.getInstance().getLogger().warning("Punishing " + player.getName() + " for trying to exploit Log4J!");

        new BukkitRunnable() {

            @Override
            public void run() {
                Plugin.getInstance().getConfigValues().getBanCommands().forEach(s ->
                        Bukkit.dispatchCommand(Bukkit.getConsoleSender(),
                                s.replace("%PLAYER%", player.getName())));
            }
        }.runTask(Plugin.getInstance());
    }
}
