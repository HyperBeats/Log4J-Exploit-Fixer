package ac.sparky.fix.spigot.impl;

import ac.sparky.fix.spigot.Plugin;
import ac.sparky.fix.spigot.impl.hooks.AtlasHook;
import ac.sparky.fix.spigot.impl.hooks.PacketEventsHook;
import ac.sparky.fix.spigot.impl.hooks.ProtocolLibHook;
import org.bukkit.Bukkit;

public class HookManager {

    public HookManager() {

        if (this.isPluginEnabled("ProtocolLib")) {
            new ProtocolLibHook();
        } else if (this.isPluginEnabled("Atlas")) {
            new AtlasHook();
        } else if (this.isPluginEnabled("packetevents")) {
            new PacketEventsHook().register();
        } else {
            Plugin.getInstance().getLogger().warning(
                    "Unable to enable because there are no packet apis to hook into," +
                            " this plugin will now only use the Log4J Filter to prevent the exploit.");
        }
    }

    private boolean isPluginEnabled(String plugin) {
        return Bukkit.getPluginManager().isPluginEnabled(plugin);
    }
}
